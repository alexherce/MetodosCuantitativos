<html>
<head>
  <title>Simulaciones Disposicion Efectivo Taller</title>
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/mathjs/3.20.1/math.min.js"></script>
</head>
<body>
  <h3>Numero de simulaciones: <span id="simulaciones"></span></h3>
  <h3>Promedio: $<span id="promedio"></span></h3>
  <h3>Desviacion Estandar: <span id="desviacion"></span></h3>
  <h3>75%: <span id="menor75"></span> - <span id="mayor75"></span></h3>
  <h3>80%: <span id="menor80"></span> - <span id="mayor80"></span></h3>
  <h3>85%: <span id="menor85"></span> - <span id="mayor85"></span></h3>
  <h3>90%: <span id="menor90"></span> - <span id="mayor90"></span></h3>
  <h3>95%: <span id="menor95"></span> - <span id="mayor95"></span></h3>

  <script>

    // VALORES PARA CONFIGURAR
    var nSimulaciones = 5000;

    var costoServicio = 0;
    var costos = [];

    for(var i = 0; i < nSimulaciones; i++) {
      var probabilidadNumeroCoches = Math.random();
      var costoDia = 0;

      if(probabilidadNumeroCoches <= 0.05) {
        var numeroCoches = 3;
      } else if(probabilidadNumeroCoches > 0.05 && probabilidadNumeroCoches <= 0.2) {
        var numeroCoches = 4;
      } else if(probabilidadNumeroCoches > 0.2 && probabilidadNumeroCoches <= 0.5) {
        var numeroCoches = 5;
      } else if(probabilidadNumeroCoches > 0.5 && probabilidadNumeroCoches <= 0.75) {
        var numeroCoches = 6;
      } else if(probabilidadNumeroCoches > 0.75 && probabilidadNumeroCoches <= 0.9) {
        var numeroCoches = 7;
      } else if(probabilidadNumeroCoches > 0.9 && probabilidadNumeroCoches <= 1) {
        var numeroCoches = 8;
      }

      for(var j = 0; j < numeroCoches; j++) {
        var probabilidadTamanoCoche = Math.random();

        if(probabilidadTamanoCoche <= 0.33333) {
          // CHICO
          var probabilidadRefaccionesServicios = Math.random();

          if(probabilidadRefaccionesServicios <= 0.45) {
            costoServicio += 350;
            costoDia += 350;
          } else if(probabilidadRefaccionesServicios > 0.45 && probabilidadRefaccionesServicios <= 0.6) {
            costoServicio += 1575;
            costoDia += 1575;
          } else if(probabilidadRefaccionesServicios > 0.6 && probabilidadRefaccionesServicios <= 0.8) {
            costoServicio += 1925;
            costoDia += 1925;
          } else if(probabilidadRefaccionesServicios > 0.8 && probabilidadRefaccionesServicios <= 0.9) {
            costoServicio += 2540;
            costoDia += 2540;
          } else if(probabilidadRefaccionesServicios > 0.9 && probabilidadRefaccionesServicios <= 1) {
            costoServicio += 700;
            costoDia += 700;
          }
        } else if(probabilidadTamanoCoche > 0.33333 && probabilidadTamanoCoche <= 0.66666) {
          // MEDIANO
          var probabilidadRefaccionesServicios = Math.random();

          if(probabilidadRefaccionesServicios <= 0.25) {
            costoServicio += 550;
            costoDia += 550;
          } else if(probabilidadRefaccionesServicios > 0.25 && probabilidadRefaccionesServicios <= 0.5) {
            costoServicio += 1975;
            costoDia += 1975;
          } else if(probabilidadRefaccionesServicios > 0.5 && probabilidadRefaccionesServicios <= 0.65) {
            costoServicio += 2545;
            costoDia += 2545;
          } else if(probabilidadRefaccionesServicios > 0.65 && probabilidadRefaccionesServicios <= 0.85) {
            costoServicio += 2925;
            costoDia += 2925;
          } else if(probabilidadRefaccionesServicios > 0.85 && probabilidadRefaccionesServicios <= 1) {
            costoServicio += 700;
            costoDia += 700;
          }
        } else if(probabilidadTamanoCoche > 0.66666 && probabilidadTamanoCoche <= 1) {
          // GRANDE
          var probabilidadRefaccionesServicios = Math.random();

          if(probabilidadRefaccionesServicios <= 0.10) {
            costoServicio += 750;
            costoDia += 750;
          } else if(probabilidadRefaccionesServicios > 0.10 && probabilidadRefaccionesServicios <= 0.25) {
            costoServicio += 2275;
            costoDia += 2275;
          } else if(probabilidadRefaccionesServicios > 0.25 && probabilidadRefaccionesServicios <= 0.55) {
            costoServicio += 2845;
            costoDia += 2845;
          } else if(probabilidadRefaccionesServicios > 0.55 && probabilidadRefaccionesServicios <= 0.95) {
            costoServicio += 3415;
            costoDia += 3415;
          } else if(probabilidadRefaccionesServicios > 0.95 && probabilidadRefaccionesServicios <= 1) {
            costoServicio += 700;
            costoDia += 700;
          }
        }
      }
      costos.push(costoDia);
      costoDia = 0;
    }

    var desviacionEstandar = math.std(costos);
    var promedio = costoServicio/nSimulaciones;
    var raizCuadrada = Math.sqrt(nSimulaciones);

    var val75 = 1.15;
    var val80 = 1.2815;
    var val85 = 1.4395;
    var val90 = 1.6448;
    var val95 = 1.9599;

    var intervaloMenor75 = promedio + (val75 * (desviacionEstandar/raizCuadrada));
    var intervaloMayor75 = promedio - (val75 * (desviacionEstandar/raizCuadrada));

    var intervaloMenor80 = promedio + (val80 * (desviacionEstandar/raizCuadrada));
    var intervaloMayor80 = promedio - (val80 * (desviacionEstandar/raizCuadrada));

    var intervaloMenor85 = promedio + (val85 * (desviacionEstandar/raizCuadrada));
    var intervaloMayor85 = promedio - (val85 * (desviacionEstandar/raizCuadrada));

    var intervaloMenor90 = promedio + (val90 * (desviacionEstandar/raizCuadrada));
    var intervaloMayor90 = promedio - (val90 * (desviacionEstandar/raizCuadrada));

    var intervaloMenor95 = promedio + (val95 * (desviacionEstandar/raizCuadrada));
    var intervaloMayor95 = promedio - (val95 * (desviacionEstandar/raizCuadrada));


    document.getElementById("simulaciones").innerHTML = nSimulaciones;
    document.getElementById("promedio").innerHTML = promedio;
    document.getElementById("desviacion").innerHTML = desviacionEstandar;


    document.getElementById("menor75").innerHTML = intervaloMenor75;
    document.getElementById("mayor75").innerHTML = intervaloMayor75;

    document.getElementById("menor80").innerHTML = intervaloMenor80;
    document.getElementById("mayor80").innerHTML = intervaloMayor80;

    document.getElementById("menor85").innerHTML = intervaloMenor85;
    document.getElementById("mayor85").innerHTML = intervaloMayor85;

    document.getElementById("menor90").innerHTML = intervaloMenor90;
    document.getElementById("mayor90").innerHTML = intervaloMayor90;

    document.getElementById("menor95").innerHTML = intervaloMenor95;
    document.getElementById("mayor95").innerHTML = intervaloMayor95;
  </script>
</body>
</html>
